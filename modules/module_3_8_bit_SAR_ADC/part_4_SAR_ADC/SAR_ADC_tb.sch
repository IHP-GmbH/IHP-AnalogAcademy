v {xschem version=3.4.6 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
B 2 2015 -1020 2815 -620 {flags=graph
y1=-0.044
y2=1.3
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=0
x2=1e-05
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
dataset=-1
unitx=1
logx=0
logy=0
color="12 7"
node="cdac_v+
cdac_v-"
hilight_wave=0
hcursor1_y=1.2502139}
B 2 2015 -1430 2815 -1030 {flags=graph
y1=-0.36
y2=0.84
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=0
x2=1e-05
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
dataset=-1
unitx=1
logx=0
logy=0
color=4
node=vin_diff
hcursor1_y=1.0065781}
N 345 -620 405 -620 {
lab=#net1}
N 265 -620 285 -620 {lab=clk_samp}
N 265 -640 285 -640 {lab=Om}
N 265 -660 285 -660 {lab=vdd}
N 265 -680 285 -680 {lab=Op}
N 565 -870 615 -870 {lab=#net2}
N 565 -850 615 -850 {lab=#net3}
N 565 -830 615 -830 {lab=#net4}
N 565 -810 615 -810 {lab=#net5}
N 565 -790 615 -790 {lab=#net6}
N 565 -770 615 -770 {lab=#net7}
N 565 -750 615 -750 {lab=#net8}
N 565 -730 615 -730 {lab=#net9}
N 565 -710 615 -710 {lab=#net10}
N 565 -690 615 -690 {lab=#net11}
N 565 -670 615 -670 {lab=#net12}
N 565 -650 615 -650 {lab=#net13}
N 565 -630 615 -630 {lab=#net14}
N 565 -610 615 -610 {lab=#net15}
N 565 -590 615 -590 {lab=#net16}
N 565 -570 615 -570 {lab=#net17}
N 565 -550 615 -550 {lab=#net18}
N 565 -530 615 -530 {lab=#net19}
N 565 -510 615 -510 {lab=#net20}
N 565 -490 615 -490 {lab=#net21}
N 565 -470 615 -470 {lab=#net22}
N 565 -450 615 -450 {lab=#net23}
N 1570 -1170 1620 -1170 {lab=bias}
N 1700 -1070 1700 -1030 {lab=GND}
N 1330 -1470 1370 -1470 {lab=vdd}
N 1310 -1490 1310 -1470 {lab=GND}
N 1310 -1490 1430 -1490 {lab=GND}
N 1100 -870 1100 -850 {lab=BN_MSB}
N 1140 -870 1140 -850 {lab=BN6}
N 1170 -870 1170 -850 {lab=BN5}
N 1200 -870 1200 -850 {lab=BN4}
N 1230 -870 1230 -850 {lab=BN3}
N 1260 -870 1260 -850 {lab=BN2}
N 1290 -870 1290 -850 {lab=BN1}
N 1330 -870 1370 -870 {lab=vdd}
N 1310 -870 1310 -850 {lab=GND}
N 1310 -850 1430 -850 {lab=GND}
N 1100 -1500 1100 -1470 {lab=B_MSB}
N 1140 -1500 1140 -1470 {lab=B6}
N 1170 -1500 1170 -1470 {lab=B5}
N 1200 -1500 1200 -1470 {lab=B4}
N 1230 -1500 1230 -1470 {lab=B3}
N 1260 -1500 1260 -1470 {lab=B2}
N 1290 -1500 1290 -1470 {lab=B1}
N 920 -1110 1040 -1110 {lab=#net24}
N 780 -1160 780 -1150 {lab=GND}
N 780 -1040 780 -1030 {lab=GND}
N 840 -1160 840 -1140 {lab=vdd}
N 840 -1040 840 -1020 {lab=vdd}
N 900 -1160 900 -1140 {lab=clk_samp}
N 700 -1230 750 -1230 {lab=vin_pos}
N 700 -1110 750 -1110 {lab=vin_neg}
N 1700 -1310 1700 -1270 {lab=vdd}
N 300 -1110 300 -1090 {lab=clk_comp}
N 300 -1050 300 -1020 {lab=GND}
N 260 -1110 260 -1090 {lab=vdd}
N 260 -1030 260 -1020 {lab=GND}
N 1750 -1090 1750 -1060 {lab=clk_comp}
N 260 -1240 260 -1220 {lab=bias}
N 260 -1160 260 -1150 {lab=GND}
N 900 -1040 900 -1020 {lab=clk_samp}
N 1900 -1180 1950 -1180 {lab=Op}
N 1900 -1160 1950 -1160 {lab=Om}
N 920 -1230 1040 -1230 {lab=#net25}
N 1300 -1330 1300 -1290 {lab=vdd}
N 1300 -1330 1370 -1330 {lab=vdd}
N 1300 -1350 1300 -1330 {lab=vdd}
N 1370 -1470 1370 -1330 {lab=vdd}
N 1270 -1350 1270 -1290 {lab=#net26}
N 1240 -1350 1240 -1290 {lab=#net27}
N 1210 -1350 1210 -1290 {lab=#net28}
N 1180 -1350 1180 -1290 {lab=#net29}
N 1150 -1350 1150 -1290 {lab=#net30}
N 1120 -1350 1120 -1290 {lab=#net31}
N 1090 -1350 1090 -1290 {lab=#net32}
N 1090 -1050 1090 -990 {lab=#net33}
N 1120 -1050 1120 -990 {lab=#net34}
N 1150 -1050 1150 -990 {lab=#net35}
N 1180 -1050 1180 -990 {lab=#net36}
N 1210 -1050 1210 -990 {lab=#net37}
N 1240 -1050 1240 -990 {lab=#net38}
N 1270 -1050 1270 -990 {lab=#net39}
N 1300 -1020 1300 -990 {lab=vdd}
N 1300 -1020 1370 -1020 {lab=vdd}
N 1300 -1050 1300 -1020 {lab=vdd}
N 1370 -1020 1370 -870 {lab=vdd}
N 1360 -1230 1620 -1230 {lab=CDAC_v+}
N 1360 -1110 1620 -1110 {lab=CDAC_v-}
N 300 -1240 300 -1220 {lab=clk_samp}
N 300 -1180 300 -1150 {lab=GND}
N 300 -980 300 -960 {lab=dac_clk}
N 300 -920 300 -890 {lab=GND}
N 260 -855 260 -825 {lab=vin_pos}
N 260 -765 260 -755 {lab=GND}
N 260 -900 260 -890 {lab=GND}
N 260 -980 260 -960 {lab=vin_neg}
N 260 -700 285 -700 {lab=clk_algo}
N 345 -700 405 -700 {lab=#net40}
N 345 -680 405 -680 {lab=#net41}
N 345 -660 405 -660 {lab=#net42}
N 345 -640 405 -640 {
lab=#net43}
N 675 -870 1005 -870 {
lab=B1}
N 675 -850 1005 -850 {lab=B2}
N 675 -830 1005 -830 {lab=B3}
N 675 -810 1005 -810 {lab=B4}
N 675 -790 1005 -790 {lab=B5}
N 675 -770 1005 -770 {lab=B6}
N 675 -750 1005 -750 {lab=B_MSB}
N 675 -730 1005 -730 {lab=BN1}
N 675 -710 1005 -710 {lab=BN2}
N 675 -690 1005 -690 {lab=BN3}
N 675 -670 1005 -670 {lab=BN4}
N 675 -650 1005 -650 {lab=BN5}
N 675 -630 1005 -630 {lab=BN6}
N 675 -610 1005 -610 {lab=BN_MSB}
N 675 -590 1005 -590 {lab=D7}
N 675 -570 1005 -570 {lab=D6}
N 675 -550 1005 -550 {lab=D5}
N 675 -530 1005 -530 {lab=D4}
N 675 -510 1005 -510 {lab=D3}
N 675 -490 1005 -490 {lab=D2}
N 675 -470 1005 -470 {lab=D1}
N 675 -450 1005 -450 {lab=D0}
N 1560 -1490 1580 -1490 {lab=Op}
N 1560 -1430 1580 -1430 {lab=Om}
N 1670 -1570 1670 -1540 {lab=vdd}
N 1670 -1380 1670 -1360 {lab=GND}
N 1820 -1460 1830 -1460 {lab=clk_algo}
N 1820 -1460 1820 -1440 {lab=clk_algo}
N 1810 -1460 1820 -1460 {lab=clk_algo}
N 1820 -1380 1820 -1360 {lab=GND}
N 1670 -1360 1820 -1360 {lab=GND}
C {devices/code_shown.sym} 205 -1710 0 0 {name=NGSPICE only_toplevel=true 
value="
.param temp=27
.param T = 1u
.param T_half = T/2
.param T_algo = T/16
.param T_algo_delay = T/10
.param T_algo_PW = T/32
.param DAC_delay = 0.99*T
.param DAC_PW = T/20
.param comparator_delay = 0.328*T

.control
tran 1u 320u 
let vin_diff = v(Vin_pos) - v(Vin_neg)
let comp_diff = v(op)- v(om)
set wr_singlescale
set wr_vecnames
wrdata bit_data.txt D0 D1 D2 D3 D4 D5 D6 D7 vin_diff dac_clk
.endc
"}
C {devices/launcher.sym} 2072.5 -590 0 0 {name=h1
descr="load waves Ctrl + left click" 
tclcommand="xschem raw_read $netlist_dir/SAR_ADC_tb.raw tran"
}
C {devices/lab_pin.sym} 300 -1240 2 0 {name=p10 sig_type=std_logic lab=clk_samp}
C {devices/lab_pin.sym} 265 -620 2 1 {name=p2 sig_type=std_logic lab=clk_samp}
C {devices/lab_pin.sym} 1370 -1470 2 0 {name=p12 sig_type=std_logic lab=vdd}
C {devices/lab_pin.sym} 265 -680 2 1 {name=p3 sig_type=std_logic lab=Op}
C {devices/lab_pin.sym} 265 -660 2 1 {name=p13 sig_type=std_logic lab=vdd}
C {devices/lab_pin.sym} 265 -640 2 1 {name=p14 sig_type=std_logic lab=Om}
C {devices/lab_pin.sym} 1950 -1180 2 0 {name=p36 sig_type=std_logic lab=Op}
C {devices/lab_pin.sym} 1950 -1160 2 0 {name=p37 sig_type=std_logic lab=Om}
C {devices/lab_pin.sym} 1570 -1170 2 1 {name=p5 sig_type=std_logic lab=bias}
C {gnd.sym} 1430 -1490 0 0 {name=l1 lab=GND}
C {devices/lab_pin.sym} 1370 -870 0 1 {name=p38 sig_type=std_logic lab=vdd}
C {gnd.sym} 1430 -850 2 1 {name=l2 lab=GND}
C {devices/lab_pin.sym} 1100 -1500 1 0 {name=p40 sig_type=std_logic lab=B_MSB}
C {devices/lab_pin.sym} 1170 -1500 1 0 {name=p41 sig_type=std_logic lab=B5}
C {devices/lab_pin.sym} 1260 -1500 1 0 {name=p42 sig_type=std_logic lab=B2}
C {devices/lab_pin.sym} 1230 -1500 1 0 {name=p43 sig_type=std_logic lab=B3}
C {devices/lab_pin.sym} 1200 -1500 1 0 {name=p44 sig_type=std_logic lab=B4}
C {devices/lab_pin.sym} 1290 -1500 1 0 {name=p46 sig_type=std_logic lab=B1}
C {devices/lab_pin.sym} 1140 -1500 1 0 {name=p45 sig_type=std_logic lab=B6}
C {devices/lab_pin.sym} 1100 -850 1 1 {name=p48 sig_type=std_logic lab=BN_MSB}
C {devices/lab_pin.sym} 1170 -850 1 1 {name=p49 sig_type=std_logic lab=BN5}
C {devices/lab_pin.sym} 1260 -850 1 1 {name=p50 sig_type=std_logic lab=BN2}
C {devices/lab_pin.sym} 1230 -850 1 1 {name=p51 sig_type=std_logic lab=BN3}
C {devices/lab_pin.sym} 1200 -850 1 1 {name=p52 sig_type=std_logic lab=BN4}
C {devices/lab_pin.sym} 1290 -850 1 1 {name=p53 sig_type=std_logic lab=BN1}
C {devices/lab_pin.sym} 1140 -850 1 1 {name=p54 sig_type=std_logic lab=BN6}
C {devices/lab_pin.sym} 1005 -770 0 1 {name=p55 sig_type=std_logic lab=B6}
C {devices/lab_pin.sym} 1005 -750 0 1 {name=p56 sig_type=std_logic lab=B_MSB}
C {devices/lab_pin.sym} 1005 -810 0 1 {name=p57 sig_type=std_logic lab=B4}
C {devices/lab_pin.sym} 1005 -870 0 1 {name=p58 sig_type=std_logic lab=B1}
C {devices/lab_pin.sym} 1005 -850 0 1 {name=p59 sig_type=std_logic lab=B2}
C {devices/lab_pin.sym} 1005 -830 0 1 {name=p60 sig_type=std_logic lab=B3}
C {devices/lab_pin.sym} 1005 -790 0 1 {name=p62 sig_type=std_logic lab=B5}
C {devices/lab_pin.sym} 1005 -610 0 1 {name=p1 sig_type=std_logic lab=BN_MSB}
C {devices/lab_pin.sym} 1005 -650 0 1 {name=p6 sig_type=std_logic lab=BN5}
C {devices/lab_pin.sym} 1005 -710 0 1 {name=p7 sig_type=std_logic lab=BN2}
C {devices/lab_pin.sym} 1005 -690 0 1 {name=p15 sig_type=std_logic lab=BN3}
C {devices/lab_pin.sym} 1005 -670 0 1 {name=p16 sig_type=std_logic lab=BN4}
C {devices/lab_pin.sym} 1005 -730 0 1 {name=p18 sig_type=std_logic lab=BN1}
C {devices/lab_pin.sym} 1005 -630 0 1 {name=p19 sig_type=std_logic lab=BN6}
C {gnd.sym} 780 -1150 0 1 {name=l3 lab=GND}
C {gnd.sym} 780 -1030 0 1 {name=l4 lab=GND}
C {devices/lab_pin.sym} 840 -1140 2 0 {name=p20 sig_type=std_logic lab=vdd}
C {devices/lab_pin.sym} 300 -1110 2 0 {name=p24 sig_type=std_logic lab=clk_comp}
C {devices/gnd.sym} 300 -1020 0 0 {name=l6 lab=GND}
C {devices/vsource.sym} 300 -1060 0 0 {name=V1 value="dc 0 ac 0 PULSE(0 1.2 comparator_delay 10p 10p T_algo_PW T_algo)"}
C {devices/vsource.sym} 260 -1060 0 1 {name=V6 value=1.2}
C {devices/gnd.sym} 260 -1020 0 1 {name=l11 lab=GND
value=1.2}
C {devices/lab_pin.sym} 260 -1110 2 1 {name=p26 sig_type=std_logic lab=vdd}
C {devices/lab_pin.sym} 1700 -1310 2 0 {name=p65 sig_type=std_logic lab=vdd}
C {gnd.sym} 1700 -1030 0 1 {name=l12 lab=GND}
C {devices/lab_pin.sym} 1750 -1060 2 0 {name=p66 sig_type=std_logic lab=clk_comp}
C {iopin.sym} 1005 -570 0 0 {name=p67 lab=D6}
C {iopin.sym} 1005 -550 0 0 {name=p28 lab=D5}
C {iopin.sym} 1005 -530 0 0 {name=p29 lab=D4}
C {iopin.sym} 1005 -510 0 0 {name=p30 lab=D3}
C {iopin.sym} 1005 -490 0 0 {name=p31 lab=D2}
C {iopin.sym} 1005 -470 0 0 {name=p32 lab=D1}
C {iopin.sym} 1005 -450 0 0 {name=p33 lab=D0}
C {devices/code_shown.sym} 225 -1315 0 0 {name=MODEL only_toplevel=true
format="tcleval( @value )"
value=".lib cornerMOSlv.lib mos_tt
.lib $::SG13G2_MODELS/cornerCAP.lib cap_typ
"}
C {devices/vsource.sym} 260 -1190 0 1 {name=V7 value=0.6}
C {devices/gnd.sym} 260 -1150 0 1 {name=l13 lab=GND
value=1.2}
C {devices/lab_pin.sym} 260 -1240 2 1 {name=p68 sig_type=std_logic lab=bias}
C {devices/lab_pin.sym} 900 -1140 2 0 {name=p22 sig_type=std_logic lab=clk_samp}
C {devices/lab_pin.sym} 840 -1020 2 0 {name=p21 sig_type=std_logic lab=vdd}
C {devices/lab_pin.sym} 900 -1020 2 0 {name=p23 sig_type=std_logic lab=clk_samp}
C {devices/lab_pin.sym} 1400 -1230 3 1 {name=p74 sig_type=std_logic lab=CDAC_v+}
C {devices/lab_pin.sym} 1400 -1110 1 1 {name=p73 sig_type=std_logic lab=CDAC_v-}
C {devices/lab_pin.sym} 700 -1230 2 1 {name=p25 sig_type=std_logic lab=vin_pos}
C {devices/lab_pin.sym} 700 -1110 2 1 {name=p69 sig_type=std_logic lab=vin_neg}
C {devices/lab_pin.sym} 260 -855 2 1 {name=p75 sig_type=std_logic lab=vin_pos}
C {iopin.sym} 1005 -590 0 0 {name=p4 lab=D7}
C {devices/gnd.sym} 300 -1150 0 0 {name=l9 lab=GND}
C {devices/gnd.sym} 300 -890 0 0 {name=l18 lab=GND}
C {devices/vsource.sym} 300 -930 0 0 {name=V12 value="dc 0 ac 0 PULSE(0 1.2 DAC_delay 10p 10p DAC_PW T)"}
C {iopin.sym} 300 -980 0 0 {name=p17 lab=dac_clk
}
C {devices/gnd.sym} 260 -755 0 1 {name=l19 lab=GND}
C {devices/gnd.sym} 260 -890 0 1 {name=l20 lab=GND}
C {devices/vsource.sym} 260 -795 0 1 {name=V11 value="dc 0 ac 0 SIN(0.6 0.3 12.7k 0 0 0)"}
C {devices/vsource.sym} 260 -930 0 1 {name=V4 value="dc 0 ac 0 SIN(0.6 0.3 12.7k 0 0 180)"}
C {devices/lab_pin.sym} 260 -700 2 1 {name=p27 sig_type=std_logic lab=clk_algo}
C {devices/lab_pin.sym} 260 -980 2 1 {name=p8 sig_type=std_logic lab=vin_neg}
C {devices/vsource.sym} 300 -1190 0 0 {name=V5 value="dc 0 ac 0 PULSE(0 1.2 0 10p 10p T_half T)"}
C {devices/lab_pin.sym} 1560 -1490 2 1 {name=p9 sig_type=std_logic lab=Op}
C {devices/lab_pin.sym} 1560 -1430 2 1 {name=p11 sig_type=std_logic lab=Om}
C {devices/lab_pin.sym} 1670 -1570 2 1 {name=p34 sig_type=std_logic lab=vdd}
C {devices/gnd.sym} 1670 -1360 0 1 {name=l7 lab=GND
value=1.2}
C {capa.sym} 1820 -1410 0 0 {name=C3
m=1
value=20f
footprint=1206
device="ceramic capacitor"}
C {devices/lab_pin.sym} 1830 -1460 2 0 {name=p35 sig_type=std_logic lab=clk_algo}
C {sar_logic.sym} 485 -660 0 0 {name=adut
dut=dut
d_cosim_model= d_cosim
model=./sar_logic.so}
C {adc_bridge1.sym} 315 -700 0 0 {name=A6
adc=adc1
adc_bridge_model=adc_bridge
in_low=0.2
in_high=0.8
}
C {adc_bridge1.sym} 315 -680 0 0 {name=A1
adc=adc1
adc_bridge_model=adc_bridge
in_low=0.2
in_high=0.8
}
C {adc_bridge1.sym} 315 -660 0 0 {name=A2
adc=adc1
adc_bridge_model=adc_bridge
in_low=0.2
in_high=0.8
}
C {adc_bridge1.sym} 315 -640 0 0 {name=A3
adc=adc1
adc_bridge_model=adc_bridge
in_low=0.2
in_high=0.8
}
C {adc_bridge1.sym} 315 -620 0 0 {name=A4
adc=adc1
adc_bridge_model=adc_bridge
in_low=0.2
in_high=0.8
}
C {dac_bridge1.sym} 645 -870 0 0 {name=A5
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -850 0 0 {name=A7
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -830 0 0 {name=A8
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -810 0 0 {name=A9
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -790 0 0 {name=A10
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -770 0 0 {name=A11
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -750 0 0 {name=A12
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -730 0 0 {name=A13
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -710 0 0 {name=A14
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -690 0 0 {name=A15
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -670 0 0 {name=A16
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -650 0 0 {name=A17
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -630 0 0 {name=A18
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -610 0 0 {name=A19
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -590 0 0 {name=A20
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -570 0 0 {name=A21
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -550 0 0 {name=A22
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -530 0 0 {name=A23
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -510 0 0 {name=A24
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -490 0 0 {name=A25
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -470 0 0 {name=A26
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {dac_bridge1.sym} 645 -450 0 0 {name=A27
dac=dac1
dac_bridge_model=dac_bridge
out_low=0
out_high=1.2
}
C {switch_array.sym} 1200 -1410 2 1 {name=x4}
C {C-DAC.sym} 1190 -1110 0 0 {name=x2}
C {C-DAC.sym} 1190 -1230 2 1 {name=x3}
C {switch_array.sym} 1200 -930 0 0 {name=x5}
C {bootstrap_switch.sym} 820 -1230 0 0 {name=x6}
C {bootstrap_switch.sym} 820 -1110 0 0 {name=x7}
C {nand_gate.sym} 1730 -1450 0 0 {name=x1}
C {dynamic_comparator.sym} 1770 -1170 0 0 {name=x8}
